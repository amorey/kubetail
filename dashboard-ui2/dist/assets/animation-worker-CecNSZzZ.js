(function(){"use strict";let n=60,c=1e3/n,o=null,t=new Map;const d={linear:e=>e,ease:e=>e*e*(3-2*e),"ease-in":e=>e*e,"ease-out":e=>e*(2-e),"ease-in-out":e=>e<.5?2*e*e:-1+(4-2*e)*e},A=()=>{const e=performance.now(),a=[];t.forEach(s=>{const{id:i,config:r,startTime:E,pausedAt:I,pausedDuration:N}=s;if(I!==void 0)return;const _=E+N+(r.delay||0),p=e-_;if(p<0)return;const m=Math.min(p/r.duration,1),O=d[r.easing||"ease"],R=O(m);self.postMessage({type:"ANIMATION_FRAME",id:i,progress:R,elapsed:p}),m>=1&&a.push(i)}),a.forEach(s=>{t.delete(s),self.postMessage({type:"ANIMATION_COMPLETE",id:s})}),t.size>0?o=self.setTimeout(A,c):o=null},f=(e,a)=>{t.has(e)&&u(e);const s={id:e,config:a,startTime:performance.now(),pausedDuration:0};t.set(e,s),o===null&&(o=self.setTimeout(A,c))},u=e=>{t.get(e)&&(t.delete(e),self.postMessage({type:"ANIMATION_STOPPED",id:e}))},l=e=>{const a=t.get(e);a&&a.pausedAt===void 0&&(a.pausedAt=performance.now())},T=e=>{const a=t.get(e);if(a&&a.pausedAt!==void 0){const s=performance.now()-a.pausedAt;a.pausedDuration+=s,a.pausedAt=void 0}},M=e=>{n=Math.max(1,Math.min(120,e)),c=1e3/n,self.postMessage({type:"FRAME_RATE_UPDATED",fps:n})},g=e=>{const{type:a}=e.data;switch(a){case"START_ANIMATION":{const{id:s,config:i}=e.data;f(s,i);break}case"STOP_ANIMATION":{const{id:s}=e.data;u(s);break}case"PAUSE_ANIMATION":{const{id:s}=e.data;l(s);break}case"RESUME_ANIMATION":{const{id:s}=e.data;T(s);break}case"SET_FRAME_RATE":{const{fps:s}=e.data;M(s);break}}};self.addEventListener("message",g)})();
